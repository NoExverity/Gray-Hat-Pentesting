@echo off

REM Run main.py and redirect error output to log.log
python main.py 2>> error_catch.log

REM Detect other files and log any errors
setlocal enabledelayedexpansion

REM Define directories to search for files
set "DIRECTORIES=func gui json lists log"

for %%d in (%DIRECTORIES%) do (
    for /r %%f in (%%d\*.py) do (
        echo Errors from %%f >> log.log
        python %%f 2>> log.log
        echo. >> log.log
    )
)

endlocal
